<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xml" href="http://nimiq.community/feed.xslt.xml"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="http://jekyllrb.com" version="3.2.1">Jekyll</generator><link href="http://nimiq.community/feed.xml" rel="self" type="application/atom+xml" /><link href="http://nimiq.community/" rel="alternate" type="text/html" /><updated>2017-12-30T01:19:25+01:00</updated><id>http://nimiq.community/</id><title type="html">Nimiq Community</title><subtitle>A compendium of community Nimiq-related content</subtitle><entry><title type="html">Running a Node.js Miner for Nimiq</title><link href="http://nimiq.community/blog/setting-up-nodejs_miner/" rel="alternate" type="text/html" title="Running a Node.js Miner for Nimiq" /><published>2017-12-22T00:00:00+01:00</published><updated>2017-12-22T00:00:00+01:00</updated><id>http://nimiq.community/blog/setting-up-nodejs_miner</id><content type="html" xml:base="http://nimiq.community/blog/setting-up-nodejs_miner/">&lt;h2 id=&quot;nimiq-mining-via-nodejs&quot;&gt;Nimiq Mining via Node.js&lt;/h2&gt;

&lt;p&gt;In this guide, we describe the steps required to configure a Node.js miner for Nimiq running on a server.
Nimiq is the first blockchain built to be native to the Web platform. Since it is implemented in JavaScript,
it is possible to mine Nimiq directly from the Web browser by simply going to a Web page
([example for the Betanet])(https://nimiq.com/miner). However, a mining client is also implemented in
Node.js (a cross-platform JavaScript run-time environment for executing JavaScript code server-side).&lt;/p&gt;

&lt;p&gt;Dedicated miners may want to set up a mining machine that runs the Node.js miner instead as it is faster while
not requiring the browser to be open all the time. In this guide, we explain how to configure the Node.js miner for Nimiq.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Difficulty: low/intermediate&lt;/strong&gt; (you should be comfortable working in the UNIX environment).&lt;/p&gt;

&lt;h2 id=&quot;1-getting-started&quot;&gt;1. Getting Started&lt;/h2&gt;

&lt;p&gt;The following are the pre-requisites to running the Node.js miner for Nimiq:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;A server with a public IP address. Alternatively, you &lt;strong&gt;may&lt;/strong&gt; be able to use a Virtual Private Server (VPS) to mine.&lt;/li&gt;
  &lt;li&gt;Many VPS providers have terms-of-service that explicitly prohibit cryptocurrency mining and may suspend or limit your account upon excessive CPU usage, so if you want to do cloud mining, usually you need to get dedicated servers online.&lt;/li&gt;
  &lt;li&gt;Ubuntu Linux 16.04 LTS, although other versions should work too.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Ensure that you can connect to the server via SSH from the terminal. Windows users may wish to use &lt;a href=&quot;http://www.putty.org&quot;&gt;PuTTY&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;2-securing-the-server&quot;&gt;2. Securing the Server&lt;/h2&gt;

&lt;p&gt;Since the server is going to be connected to the Internet constantly, it is important to secure it.
To do that, we set up Uncomplicated Firewall (ufw)
to restrict connections to/from the server, and run the Node.js miner under a non-root user account.
Since it is not a good idea to run the miner under the root account, here we create a new ‘nimiq’ user account.
Type the command below to create a new user account, then fill in the password (you can leave everything else blank).&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;adduser nimiq
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Assign sudo privileges to this user so it is possible to run commands with superuser privileges.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;usermod -aG sudo nimiq
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Exit, and connect again via SSH as the newly created nimiq user (you can also use ssh-copy-id if you already have your SSH keys
and do not want to keep typing login password). In this guide, we will use 51.15.206.160 as an example throughout – but
it should be different to yours.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;ssh nimiq@51.15.206.160
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;In Ubuntu, we can use Uncomplicated Firewall (ufw) – a frontend for iptables that provides an easy to use interface
for people unfamiliar with firewall. Type the commands below in the shell to enable ufw.
By default, ufw will deny all incoming connections and allow all outgoing connections, so we need to allow basic SSH connections
(otherwise we won’t be able to connect to our server). In the last command, the status from ufw should show as ‘active’.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo apt-get install ufw
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo ufw allow ssh
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo ufw &lt;span class=&quot;nb&quot;&gt;enable&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo ufw status
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;To run a NodeJs Client you will need a publicly routable IP, Domain and SSL Certificate (get a free one at letsencrypt.org), so in
the next section we describe how to configure these.&lt;/p&gt;

&lt;h2 id=&quot;3-obtain-a-domain-name&quot;&gt;3. Obtain a Domain Name&lt;/h2&gt;

&lt;p&gt;Before we can get the SSL certificate that we need to run our miner, we need a domain name. You could register
for a domain name from many places, like &lt;a href=&quot;https://www.godaddy.com&quot;&gt;GoDaddy&lt;/a&gt;, &lt;a href=&quot;https://www.namecheap.com&quot;&gt;NameCheap&lt;/a&gt;, etc.
Once the domain name is registered, you need to configure the DNS record for Letsencrypt (&lt;a href=&quot;https://www.digitalocean.com/community/tutorials/how-to-set-up-let-s-encrypt-with-nginx-server-blocks-on-ubuntu-16-04&quot;&gt;see here for a guide&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Otherwise, if you do not wish to spend any money, you could register for a free domain name from &lt;a href=&quot;http://www.dot.tk&quot;&gt;Dot.tk&lt;/a&gt;.
As an example, the screenshot below shows how we register for mynimiqminer01.cf from Dot.tk.&lt;/p&gt;

&lt;div class=&quot;image main&quot;&gt;&lt;img src=&quot;/images/nodejs_2.png&quot; alt=&quot;&quot; /&gt;&lt;/div&gt;

&lt;p&gt;From the next page of the registration page, make sure to select the Use DNS option, and enter the IP address of your server
in the A record fields. You need to add two A records to connect the IP to the domain name, one that starts with ‘www’ (e.g. http://www.mynimiqminer01.cf)
and another with nothing before it (e.g. http://mynimiqminer01.cf). Finish the registration process. You could use whois to confirm
that the registration has been processed – usually after 15 minutes or so.&lt;/p&gt;

&lt;div class=&quot;image main&quot;&gt;&lt;img src=&quot;/images/nodejs_3.png&quot; alt=&quot;&quot; /&gt;&lt;/div&gt;

&lt;p&gt;The free DNS provider (FreeNOM) does not like it if we are squatting on domain that does not have an accessible website, so we are also going to set up a placeholder page
using &lt;a href=&quot;https://www.nginx.com&quot;&gt;Nginx&lt;/a&gt;. If you are using a paid domain, you can skip this step (but you should still open port 80 and 443 anyway for the Node.js miner to work).
Connect to the server again via SSH and type the following commands to install Nginx:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo apt-get update
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo apt-get install nginx
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Now we need to adjust the firewall again to open port 80 (http) and 443 (https).&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo ufw app list
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo ufw allow ‘Nginx Full’
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo ufw status
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;If Nginx is running correctly, you should see a welcome message by going to the IP address of the server from your browser. Once the domain name has been registered, you could go to that domain name from your browser as well. For e.g. &lt;a href=&quot;http://51.15.206.160&quot;&gt;51.15.206.160&lt;/a&gt;, &lt;a href=&quot;http://mynimiqminer01.cf&quot;&gt;mynimiqminer01.cf&lt;/a&gt; and &lt;a href=&quot;http://www.mynimiqminer01.cf&quot;&gt;www.mynimiqminer01.cf&lt;/a&gt; all load the welcome page for Nginx that we set up in the earlier sections.&lt;/p&gt;

&lt;h2 id=&quot;4-generate-lets-encrypt-ssl-certificate&quot;&gt;4. Generate Let’s Encrypt SSL Certificate&lt;/h2&gt;

&lt;p&gt;Now we need to get an SSL certificate (issued by Let’s Encrypt) using the &lt;a href=&quot;https://certbot.eff.org&quot;&gt;EFF’s Certbot&lt;/a&gt;.
Note that you need port 80 and 443 open. Refer to the last part of Step 3 if you have not done so. Next, type the following commands to install the certbot:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo apt-get update
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo apt-get install software-properties-common
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo add-apt-repository ppa:certbot/certbot
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo apt-get update
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo apt-get install certbot
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;To obtain a cert using a built-in “standalone” webserver (you may need to temporarily stop your existing webserver, if any)
for example.com and www.example.com, we type the following commands (shown here for mynimiqminer01.cf).
Enter your email, accept the agreement and take note of the output of certbot.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo certbot certonly --standalone -d mynimiqminer01.cf -d www.mynimiqminer01.cf
IMPORTANT NOTES:
- Congratulations! Your certificate and chain have been saved at:
/etc/letsencrypt/live/mynimiqminer01.cf/fullchain.pem
Your key file has been saved at:
/etc/letsencrypt/live/mynimiqminer01.cf/privkey.pem
Your cert will expire on 2018-03-22. To obtain a new or tweaked
version of this certificate &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;the future, simply run certbot
again. To non-interactively renew &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;all&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; of your certificates, run
&lt;span class=&quot;s2&quot;&gt;&quot;certbot renew&quot;&lt;/span&gt;
- Your account credentials have been saved &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;your Certbot
configuration directory at /etc/letsencrypt. You should make a
secure backup of this folder now. This configuration directory will
also contain certificates and private keys obtained by Certbot so
making regular backups of this folder is ideal.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Next, we verify that auto-renewal works. You should not see any error from the command below.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo certbot renew --dry-run
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;We also need to set the permission so non-root users can access these certificate files.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo chmod 755 /etc/letsencrypt/live
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo chmod 755 /etc/letsencrypt/archive
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;5-installing-nimiq-nodejs-miner&quot;&gt;5. Installing Nimiq Node.js Miner&lt;/h2&gt;

&lt;p&gt;Now we have everything we need to install the Node.js server and run the Node.js miner for Nimiq! To begin with, first we install version 8 and above of Node.js using the following commands:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;curl -sL https://deb.nodesource.com/setup_9.x -o nodesource_setup.sh
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo bash nodesource_setup.sh
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo apt-get install nodejs build-essential git
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Next, using Node Package Manager (npm), we install Gulp – a toolkit for automating painful or time-consuming tasks in development workflow – globally for all users.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo npm install -g gulp
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Finally we can clone the Github repository for nimiq, and checkout the &lt;strong&gt;release&lt;/strong&gt; branch.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ~
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git clone https://github.com/nimiq-network/core
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;core
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;git checkout release
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Install and build the project using npm.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;npm install
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;npm run build
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;To run the Node.js miner for Nimiq, we need a publicly routable IP, a domain name and an SSL certificate. Now we have everything we need!
Start the client by running clients/nodejs/index.js. To adjust the number of threads, provide the option to the miner parameter in the command
below, e.g. –miner=2 to use two threads.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ~/core/clients/nodejs/
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;node index.js --host mynimiqminer01.cf --port 8080 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
--key /etc/letsencrypt/live/mynimiqminer01.cf/privkey.pem &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
--cert /etc/letsencrypt/live/mynimiqminer01.cf/fullchain.pem &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
--miner&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;2
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Take note of the first two lines produced by the node command. They show your wallet address that the miner is using.
Eventually you should see messages that the blocks are downloading.
Wait until you catch up to the latest block at &lt;a href=&quot;https://nimiq.watch&quot;&gt;Nimiq Watch&lt;/a&gt;.
The miner is now running if you see lines that begin with the word ‘Miner’. Congratulations!&lt;/p&gt;

&lt;p&gt;As an optional step, you can use &lt;strong&gt;pm2&lt;/strong&gt;, which is a process manager for Node.js applications, to
manage and run the miner as a background service. This is described in the next section of this guide.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;I 05:57:48] Node: Wallet initialized &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;address NQ36 99EY F5G7 VG20 KDEX RL38 TLVU CCKG C7TF.
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;I 05:57:48] Node: Blockchain: &lt;span class=&quot;nv&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1, &lt;span class=&quot;nv&quot;&gt;totalWork&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1.4116399577030896, &lt;span class=&quot;nv&quot;&gt;headHash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;K3Id+E/rgqR8SB8pV0X9Fxv4FxkC5eePu/oXVaj6ZO4&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
...
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;I 15:20:46] Node: Now at block: 5800
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;I 15:20:46] Node: Now at block: 5900
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;I 15:20:47] Node: Now at block: 6000
...
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;I 15:35:23] Miner: Starting work on  … &lt;span class=&quot;nv&quot;&gt;hashrate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;2700 H/s
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;6-configuring-pm2&quot;&gt;6. Configuring PM2&lt;/h2&gt;

&lt;p&gt;We can keep the miner running, even after we disconnect from our SSH session, through &lt;a href=&quot;http://pm2.keymetrics.io/&quot;&gt;PM2&lt;/a&gt;, which is
a process manager for Node.js application. Quit the miner (Ctrl-C) and type the commands below. Note now two dashes (–) are used to separate index.js and all the parameters that we pass to it.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;sudo npm install -g pm2
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;pm2 start index.js -- --host mynimiqminer01.cf --port 8080 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
--key /etc/letsencrypt/live/mynimiqminer01.cf/privkey.pem &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
--cert /etc/letsencrypt/live/mynimiqminer01.cf/fullchain.pem &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
--miner&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;2
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Ensure that the miner is running correctly under PM2 by looking at the list of applications managed by PM2 and also from the log files.
You should not see any error in the log files. Now you can exit the SSH session and the miner will continue running in the background.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;pm2 list
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;pm2 logs
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;To experiment with different numbers of threads and see how it affects your hashrate, you need to stop the Node.js client first and change the –miner parameter, e.g. below we stop and start the miner again with an increased number of workers (from 2 to 4).&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;pm2 stop all
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;pm2 start index.js -- --host mynimiqminer01.cf --port 8080 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
--key /etc/letsencrypt/live/mynimiqminer01.cf/privkey.pem &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
--cert /etc/letsencrypt/live/mynimiqminer01.cf/fullchain.pem &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
--miner&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;4
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h2 id=&quot;7-tips-and-hints&quot;&gt;7. Tips and Hints&lt;/h2&gt;

&lt;h3 id=&quot;a-auto-restarting-the-miner-when-the-system-restarts&quot;&gt;a. Auto-restarting the miner when the system restarts.&lt;/h3&gt;

&lt;p&gt;We can also make the miner restart automatically upon system restart using PM2 startup. Type the following pm2 startup command, and do what it says to generate the startup script.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;pm2 startup systemd
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;PM2] Init System found: systemd
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;PM2] To setup the Startup Script, copy/paste the following &lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt;:
sudo env &lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PATH&lt;/span&gt;:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u nimiq --hp /home/nimiq
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;After that, we can check the status of the systemd unit with systemctl.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;systemctl status pm2-nimiq
 pm2-nimiq.service - PM2 process manager
   Loaded: loaded &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;/etc/systemd/system/pm2-nimiq.service; enabled; vendor preset: enabled&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
   Active: active &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;running&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; since Wed 2017-12-20 16:03:25 CET; 1min 28s ago
     Docs: https://pm2.keymetrics.io/
 Main PID: 10427 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;PM2 v2.9.1: God&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
   CGroup: /system.slice/pm2-nimiq.service
           ‣ 10427 PM2 v2.9.1: God Daemon &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;/home/nimiq/.pm2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;   
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Test reboot the server, and make sure that the miner is still running (via pm2 list and top).&lt;/p&gt;

&lt;h3 id=&quot;b-increasing-the-number-of-threads&quot;&gt;b. Increasing the number of threads.&lt;/h3&gt;

&lt;p&gt;This only applies when you increase the number of workers to a large number, but your hashrate isn’t going up. In this case, it may be because you’re hitting &lt;a href=&quot;http://docs.libuv.org/en/v1.x/threadpool.html&quot;&gt;the default limit on the number of workers from libuv&lt;/a&gt;. @Marvin from discord says that:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;“v8’s libuv limits the thread pool for AsyncWorker’s by default, depending on your system configuration and node build. You can overwrite its default using the environment variable UV_THREADPOOL_SIZE i.e. run the node using env UV_THREADPOOL_SIZE=&lt;threads&gt; node index.js --miner=&lt;threads&gt; &lt;args&gt;. Note that using all resources of an machine can render it unusable... 👍&quot;&lt;/args&gt;&lt;/threads&gt;&lt;/threads&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In this case, set the environmental variable &lt;code class=&quot;highlighter-rouge&quot;&gt;UV_THREADPOOL_SIZE&lt;/code&gt; to a larger value before running the Node.js miner.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;UV_THREADPOOL_SIZE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;4
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;pm2 start index.js -- --host mynimiqminer01.cf --port 8080 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
--key /etc/letsencrypt/live/mynimiqminer01.cf/privkey.pem &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
--cert /etc/letsencrypt/live/mynimiqminer01.cf/fullchain.pem &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
--miner&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;4
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;c-running-the-miner-locally-not-on-vps&quot;&gt;c. Running the miner locally (not on VPS).&lt;/h3&gt;

&lt;p&gt;To run it on a personal system and without a domain name, you will need to generate a self-signed SSL certificate and then run the regular command to start the node but replace the domain name with localhost, key with the generated key, and cert with the generated cert.&lt;/p&gt;

&lt;p&gt;@Soeren from discord says that:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Also, it’s possible to run the nodejs miner locally with just localhost and a self signed certificate, but it’s just not recommended, because if everybody would do it, the network would centralize, as no clients that run as localhost can connect to each other only to public domains. But it’s possible. I don’t know if anything will be done to prevent that or to fix the not-reachable problem, but at least for testing the nodejs client, you can run it locally without a vps or domain.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;d-import-wallet&quot;&gt;d. Import wallet.&lt;/h3&gt;

&lt;p&gt;To import your wallet from the browser, follow the &lt;a href=&quot;https://nimiq.com/faq/#export-import-private-keys&quot;&gt;instructions on Nimiq’s website&lt;/a&gt; to dump/export the private key, and to import it start the node with node index.js –wallet-seed &lt;private key=&quot;&quot; that=&quot;&quot; was=&quot;&quot; dumped=&quot;&quot;&gt; --&lt;remaining args=&quot;&quot;&gt;. This will permanently change the wallet address and the user can see their balance in the browser that shares the same private key.&lt;/remaining&gt;&lt;/private&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Congratulations. Your Nimiq Node.js miner is now running! You can check how many NIMs you have mined by entering the wallet address used by the miner
at block explorer sites, such as &lt;a href=&quot;https://nimiq.watch&quot;&gt;Nimiq Watch&lt;/a&gt; or &lt;a href=&quot;https://nimiq.mopsus.com&quot;&gt;nimiq.mopsus.com&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;image&quot;&gt;&lt;img src=&quot;/images/nodejs_4.png&quot; alt=&quot;&quot; /&gt;&lt;/div&gt;</content><summary type="html">A simple guide on how to set up the Node.js miner for Nimiq</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://nimiq.community/images/nodejs_1.png" /></entry><entry><title type="html">Welcome to Nimiq Community Site</title><link href="http://nimiq.community/blog/welcome-to-nimiq-community/" rel="alternate" type="text/html" title="Welcome to Nimiq Community Site" /><published>2017-12-08T00:00:00+01:00</published><updated>2017-12-08T00:00:00+01:00</updated><id>http://nimiq.community/blog/welcome-to-nimiq-community</id><content type="html" xml:base="http://nimiq.community/blog/welcome-to-nimiq-community/">&lt;h2 id=&quot;welcome-to-nimiq-community&quot;&gt;Welcome to Nimiq Community&lt;/h2&gt;

&lt;p&gt;Nimiq community is growing bigger and bigger each day. New users join the ranks and start contributing with their opinion and different points of view but also with entire projects and distinct types of content. We believe every input is important and we should have a place to gather all this contributions. This is my attempt to create that place. I hope you like it and enrich Nimiq Community by sharing your skills. As always, thanks for your support!&lt;/p&gt;

&lt;h2 id=&quot;why-this-site&quot;&gt;Why this site?&lt;/h2&gt;

&lt;p&gt;Why is this site needed when official information is posted in our &lt;a href=&quot;medium.com/nimiq-network&quot;&gt;Blog&lt;/a&gt; or &lt;a href=&quot;https://www.youtube.com/channel/UCJ1qu3KXwfmkGwBkU8F1jQg&quot;&gt;Youtube Channel&lt;/a&gt;?… Because there is no place for non-official information!. Out active community is generally searching for ways to contribute, and we love that!. It would be a shame for all this contributions get lost in the &lt;em&gt;Ether&lt;/em&gt;. This site is an effort to list and store all of them.&lt;/p&gt;

&lt;p&gt;Nimiq is an open source project and all the members of our Team are hardcore believers of the open source movement. We want our community members to feel involved in our project and I think one of the best ways of doing so is by empowering our community to leave a part of themselves inside the project. Something they can show their family and friends, something we can all be proud of and say: ‘I’m part of Nimiq’.&lt;/p&gt;

&lt;h2 id=&quot;proof-of-sushi&quot;&gt;Proof of Sushi&lt;/h2&gt;

&lt;p&gt;If you are part of our &lt;a href=&quot;https://discord.gg/55rHkGz&quot;&gt;Discord&lt;/a&gt; you probably remember this announcement:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Nimiq is an Open Source Project and we appreciate all contributions. 
It is with the help of our community that  we push on forward to Crypto Mass Adoption. 
We would like to thank all contributors by giving them tags according to their contribution in the following way:
-Nimiq_Nerd : Very experieced users and contributors
-Nimiq_Surfer: Leads of their own projects
-Nimiq_Sushi: Regular contributors. Any commit or contribution to a community project will get you here.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you would ask me for a PKI to measure community activity I would answer &lt;code class=&quot;highlighter-rouge&quot;&gt;amount of Nimiq_Sushi&lt;/code&gt;. Users become &lt;em&gt;Nimiq_Sushi&lt;/em&gt; after sending a contribution in the form of a commit. Some users are already developing their own projects but for those who are just newbies, we can start with &lt;a href=&quot;https://nimiq.com&quot;&gt;this repository&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;By sending a contribution you are shaping this site and the culture our community stands for. This first commit is your &lt;strong&gt;Proof of Sushi&lt;/strong&gt;, the one thing that unequivocally shows you are part of Nimiq. With time we will invent innovative ways of promoting contributions and rewarding Nimiq_Sushi. I trully believe we as community can support the Nimiq project in numerous ways. I’ll do my part and help beginners and non-techies to contribute, you do your part and always share (and hopefully implement) your ideas via commit.&lt;/p&gt;

&lt;p&gt;Nimiq_Sushi unite!&lt;/p&gt;

&lt;p&gt;Richy, Nimiq Community Manager&lt;/p&gt;</content><summary type="html">Let me welcome you to this site and tell you what is all about</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://nimiq.community/images/NimiqCommunity.png" /></entry></feed>
